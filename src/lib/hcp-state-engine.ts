export const STATE_LADDER = ["engaged", "neutral", "busy", "irritated", "defensive", "disengaged"];
export function deriveInitialState(tags) {
  if (tags.includes("frustrated") || tags.includes("overwhelmed") || tags.includes("busy")) {
    return "busy";
  }
  return "neutral";
}
export function computeNextState(current, repAnalysis) {
  const index = STATE_LADDER.indexOf(current);
  if (repAnalysis.hostile) {
    return STATE_LADDER[Math.min(index + 2, STATE_LADDER.length - 1)];
  }
  if (repAnalysis.poor) {
    return STATE_LADDER[Math.min(index + 1, STATE_LADDER.length - 1)];
  }
  if (repAnalysis.excellent) {
    return STATE_LADDER[Math.max(index - 1, 0)];
  }
  return current;
}
export function nextState(current, repEvaluation) {
  const repAnalysis = {
    hostile: repEvaluation.isHostile,
    poor: repEvaluation.increasedDemand,
    excellent: repEvaluation.acknowledgedConstraint
  };
  const nextState2 = computeNextState(current, repAnalysis);
  return nextState2;
}
export function isStateDominant(state) {
  return ["irritated", "defensive", "disengaged"].includes(state);
}
export function getBlockedCategories(state) {
  if (isStateDominant(state)) {
    return ["curiosity", "collaboration", "warmth", "engagement", "active_listening_positive"];
  }
  return [];
}
export function toneForState(state) {
  switch (state) {
    case "engaged":
      return {
        maxSentences: 3,
        warmth: "moderate",
        boundary: false,
        tone: "open"
      };
    case "neutral":
      return {
        maxSentences: 2,
        warmth: "low",
        boundary: false,
        tone: "professional"
      };
    case "busy":
      return {
        maxSentences: 2,
        warmth: "minimal",
        boundary: false,
        tone: "time-aware"
      };
    case "irritated":
      return {
        maxSentences: 1,
        warmth: "none",
        boundary: true,
        tone: "curt"
      };
    case "defensive":
      return {
        maxSentences: 2,
        warmth: "none",
        boundary: true,
        tone: "guarded"
      };
    case "disengaged":
      return {
        maxSentences: 1,
        warmth: "none",
        boundary: true,
        tone: "withdrawn"
      };
    default:
      return {
        maxSentences: 2,
        warmth: "low",
        boundary: false,
        tone: "neutral"
      };
  }
}
export function getStateLabel(state) {
  const labels = {
    "engaged": "Engaged",
    "neutral": "Neutral",
    "busy": "Busy",
    "irritated": "Irritated",
    "defensive": "Defensive",
    "disengaged": "Disengaged"
  };
  return labels[state];
}

//# sourceMappingURL=data:application/json;base64,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QVE7QUFBQSxJQUNSLGFBQWE7QUFBQSxJQUNiLGFBQWE7QUFBQSxJQUNiLGNBQWM7QUFBQSxFQUNoQjtBQUNBLFNBQU9BLE9BQU9SLEtBQUs7QUFDckIiLCJuYW1lcyI6WyJTVEFURV9MQURERVIiLCJkZXJpdmVJbml0aWFsU3RhdGUiLCJ0YWdzIiwiaW5jbHVkZXMiLCJjb21wdXRlTmV4dFN0YXRlIiwiY3VycmVudCIsInJlcEFuYWx5c2lzIiwiaW5kZXgiLCJpbmRleE9mIiwiaG9zdGlsZSIsIk1hdGgiLCJtaW4iLCJsZW5ndGgiLCJwb29yIiwiZXhjZWxsZW50IiwibWF4IiwibmV4dFN0YXRlIiwicmVwRXZhbHVhdGlvbiIsImlzSG9zdGlsZSIsImluY3JlYXNlZERlbWFuZCIsImFja25vd2xlZGdlZENvbnN0cmFpbnQiLCJpc1N0YXRlRG9taW5hbnQiLCJzdGF0ZSIsImdldEJsb2NrZWRDYXRlZ29yaWVzIiwidG9uZUZvclN0YXRlIiwibWF4U2VudGVuY2VzIiwid2FybXRoIiwiYm91bmRhcnkiLCJ0b25lIiwiZ2V0U3RhdGVMYWJlbCIsImxhYmVscyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJoY3Atc3RhdGUtZW5naW5lLnRzIl0sInNvdXJjZXNDb250ZW50IjpbInR5cGUgSENQU3RhdGUgPSAnZW5nYWdlZCcgfCAnbmV1dHJhbCcgfCAnYnVzeScgfCAnaXJyaXRhdGVkJyB8ICdkZWZlbnNpdmUnIHwgJ2Rpc2VuZ2FnZWQnO1xudHlwZSBUb25lRGlyZWN0aXZlID0geyBtYXhTZW50ZW5jZXM6IG51bWJlcjsgd2FybXRoOiBzdHJpbmc7IGJvdW5kYXJ5OiBib29sZWFuOyB0b25lOiBzdHJpbmc7IH07XG50eXBlIFJlcEV2YWx1YXRpb24gPSB7XG4gIGlzSG9zdGlsZTogYm9vbGVhbjtcbiAgaW5jcmVhc2VkRGVtYW5kOiBib29sZWFuO1xuICBhY2tub3dsZWRnZWRDb25zdHJhaW50OiBib29sZWFuO1xuICBtZXRyaWNTY29yZXM/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xufTtcblxuZXhwb3J0IHR5cGUgeyBIQ1BTdGF0ZSwgVG9uZURpcmVjdGl2ZSwgUmVwRXZhbHVhdGlvbiB9O1xuXG5leHBvcnQgY29uc3QgU1RBVEVfTEFEREVSOiBIQ1BTdGF0ZVtdID0gW1xuICAnZW5nYWdlZCcsXG4gICduZXV0cmFsJyxcbiAgJ2J1c3knLFxuICAnaXJyaXRhdGVkJyxcbiAgJ2RlZmVuc2l2ZScsXG4gICdkaXNlbmdhZ2VkJ1xuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlcml2ZUluaXRpYWxTdGF0ZSh0YWdzOiBzdHJpbmdbXSk6IEhDUFN0YXRlIHtcbiAgaWYgKHRhZ3MuaW5jbHVkZXMoJ2ZydXN0cmF0ZWQnKSB8fCB0YWdzLmluY2x1ZGVzKCdvdmVyd2hlbG1lZCcpIHx8IHRhZ3MuaW5jbHVkZXMoJ2J1c3knKSkge1xuICAgIHJldHVybiAnYnVzeSc7XG4gIH1cbiAgcmV0dXJuICduZXV0cmFsJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVOZXh0U3RhdGUoXG4gIGN1cnJlbnQ6IEhDUFN0YXRlLFxuICByZXBBbmFseXNpczogeyBob3N0aWxlOiBib29sZWFuOyBwb29yOiBib29sZWFuOyBleGNlbGxlbnQ6IGJvb2xlYW4gfVxuKTogSENQU3RhdGUge1xuICBjb25zdCBpbmRleCA9IFNUQVRFX0xBRERFUi5pbmRleE9mKGN1cnJlbnQpO1xuXG4gIGlmIChyZXBBbmFseXNpcy5ob3N0aWxlKSB7XG4gICAgcmV0dXJuIFNUQVRFX0xBRERFUltNYXRoLm1pbihpbmRleCArIDIsIFNUQVRFX0xBRERFUi5sZW5ndGggLSAxKV07XG4gIH1cblxuICBpZiAocmVwQW5hbHlzaXMucG9vcikge1xuICAgIHJldHVybiBTVEFURV9MQURERVJbTWF0aC5taW4oaW5kZXggKyAxLCBTVEFURV9MQURERVIubGVuZ3RoIC0gMSldO1xuICB9XG5cbiAgaWYgKHJlcEFuYWx5c2lzLmV4Y2VsbGVudCkge1xuICAgIHJldHVybiBTVEFURV9MQURERVJbTWF0aC5tYXgoaW5kZXggLSAxLCAwKV07XG4gIH1cblxuICByZXR1cm4gY3VycmVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5leHRTdGF0ZShcbiAgY3VycmVudDogSENQU3RhdGUsXG4gIHJlcEV2YWx1YXRpb246IFJlcEV2YWx1YXRpb25cbik6IEhDUFN0YXRlIHtcbiAgY29uc3QgcmVwQW5hbHlzaXMgPSB7XG4gICAgaG9zdGlsZTogcmVwRXZhbHVhdGlvbi5pc0hvc3RpbGUsXG4gICAgcG9vcjogcmVwRXZhbHVhdGlvbi5pbmNyZWFzZWREZW1hbmQsXG4gICAgZXhjZWxsZW50OiByZXBFdmFsdWF0aW9uLmFja25vd2xlZGdlZENvbnN0cmFpbnRcbiAgfTtcbiAgXG4gIGNvbnN0IG5leHRTdGF0ZSA9IGNvbXB1dGVOZXh0U3RhdGUoY3VycmVudCwgcmVwQW5hbHlzaXMpO1xuICBcbiAgcmV0dXJuIG5leHRTdGF0ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzU3RhdGVEb21pbmFudChzdGF0ZTogSENQU3RhdGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIFsnaXJyaXRhdGVkJywgJ2RlZmVuc2l2ZScsICdkaXNlbmdhZ2VkJ10uaW5jbHVkZXMoc3RhdGUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tlZENhdGVnb3JpZXMoc3RhdGU6IEhDUFN0YXRlKTogc3RyaW5nW10ge1xuICBpZiAoaXNTdGF0ZURvbWluYW50KHN0YXRlKSkge1xuICAgIHJldHVybiBbJ2N1cmlvc2l0eScsICdjb2xsYWJvcmF0aW9uJywgJ3dhcm10aCcsICdlbmdhZ2VtZW50JywgJ2FjdGl2ZV9saXN0ZW5pbmdfcG9zaXRpdmUnXTtcbiAgfVxuICByZXR1cm4gW107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b25lRm9yU3RhdGUoc3RhdGU6IEhDUFN0YXRlKTogVG9uZURpcmVjdGl2ZSB7XG4gIHN3aXRjaCAoc3RhdGUpIHtcbiAgICBjYXNlICdlbmdhZ2VkJzpcbiAgICAgIHJldHVybiB7IG1heFNlbnRlbmNlczogMywgd2FybXRoOiAnbW9kZXJhdGUnLCBib3VuZGFyeTogZmFsc2UsIHRvbmU6ICdvcGVuJyB9O1xuICAgIGNhc2UgJ25ldXRyYWwnOlxuICAgICAgcmV0dXJuIHsgbWF4U2VudGVuY2VzOiAyLCB3YXJtdGg6ICdsb3cnLCBib3VuZGFyeTogZmFsc2UsIHRvbmU6ICdwcm9mZXNzaW9uYWwnIH07XG4gICAgY2FzZSAnYnVzeSc6XG4gICAgICByZXR1cm4geyBtYXhTZW50ZW5jZXM6IDIsIHdhcm10aDogJ21pbmltYWwnLCBib3VuZGFyeTogZmFsc2UsIHRvbmU6ICd0aW1lLWF3YXJlJyB9O1xuICAgIGNhc2UgJ2lycml0YXRlZCc6XG4gICAgICByZXR1cm4geyBtYXhTZW50ZW5jZXM6IDEsIHdhcm10aDogJ25vbmUnLCBib3VuZGFyeTogdHJ1ZSwgdG9uZTogJ2N1cnQnIH07XG4gICAgY2FzZSAnZGVmZW5zaXZlJzpcbiAgICAgIHJldHVybiB7IG1heFNlbnRlbmNlczogMiwgd2FybXRoOiAnbm9uZScsIGJvdW5kYXJ5OiB0cnVlLCB0b25lOiAnZ3VhcmRlZCcgfTtcbiAgICBjYXNlICdkaXNlbmdhZ2VkJzpcbiAgICAgIHJldHVybiB7IG1heFNlbnRlbmNlczogMSwgd2FybXRoOiAnbm9uZScsIGJvdW5kYXJ5OiB0cnVlLCB0b25lOiAnd2l0aGRyYXduJyB9O1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4geyBtYXhTZW50ZW5jZXM6IDIsIHdhcm10aDogJ2xvdycsIGJvdW5kYXJ5OiBmYWxzZSwgdG9uZTogJ25ldXRyYWwnIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRlTGFiZWwoc3RhdGU6IEhDUFN0YXRlKTogc3RyaW5nIHtcbiAgY29uc3QgbGFiZWxzOiBSZWNvcmQ8SENQU3RhdGUsIHN0cmluZz4gPSB7XG4gICAgJ2VuZ2FnZWQnOiAnRW5nYWdlZCcsXG4gICAgJ25ldXRyYWwnOiAnTmV1dHJhbCcsXG4gICAgJ2J1c3knOiAnQnVzeScsXG4gICAgJ2lycml0YXRlZCc6ICdJcnJpdGF0ZWQnLFxuICAgICdkZWZlbnNpdmUnOiAnRGVmZW5zaXZlJyxcbiAgICAnZGlzZW5nYWdlZCc6ICdEaXNlbmdhZ2VkJ1xuICB9O1xuICByZXR1cm4gbGFiZWxzW3N0YXRlXTtcbn1cbiJdLCJmaWxlIjoiL2FwcC9zcmMvbGliL2hjcC1zdGF0ZS1lbmdpbmUudHMifQ==